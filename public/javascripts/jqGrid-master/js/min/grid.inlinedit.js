var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,t){if(t.get||t.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[f]=t.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var f=0;return $jscomp.iteratorPrototype(function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,f){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var t=0,d={next:function(){if(t<a.length){var u=t++;return{value:f(u,a[u]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,f,t,d){if(f){t=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var u=a[d];u in t||(t[u]={});t=t[u]}a=a[a.length-1];d=t[a];f=f(d);f!=d&&null!=f&&$jscomp.defineProperty(t,a,{configurable:!0,writable:!0,value:f})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.findInternal=function(a,f,t){a instanceof String&&(a=String(a));for(var d=a.length,u=0;u<d;u++){var D=a[u];if(f.call(t,D,u,a))return{i:u,v:D}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,t){return $jscomp.findInternal(this,a,t).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var f=a.jgrid,t=f.fullBoolFeedback,d=f.hasOneFromClasses,u=a.fn.jqGrid,D=function(a){return u.getGuiStyles.call(this,"states."+a)},I=function(e){var w=a.makeArray(arguments).slice(1);w.unshift("");w.unshift("Inline");w.unshift(e);return f.feedback.apply(this,w)};f.inlineEdit=f.inlineEdit||{};f.extend({editRow:function(e,
w,l,h,c,n,d,x,k,b){var g={},m=a.makeArray(arguments).slice(1);"object"===a.type(m[0])?g=m[0]:(void 0!==w&&(g.keys=w),a.isFunction(l)&&(g.oneditfunc=l),a.isFunction(h)&&(g.successfunc=h),void 0!==c&&(g.url=c),null!=n&&(g.extraparam=n),a.isFunction(d)&&(g.aftersavefunc=d),a.isFunction(x)&&(g.errorfunc=x),a.isFunction(k)&&(g.afterrestorefunc=k),a.isFunction(b)&&(g.beforeEditRow=b));return this.each(function(){var b=this,c=a(b),h=b.p,n=0,r=null,w={},l=h.colModel,k=h.prmNames;if(b.grid){var d=a.extend(!0,
{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,mtype:"POST",focusField:!0},f.inlineEdit,h.inlineEditing||{},g),q=c.jqGrid("getInd",e,!0),m=d.focusField,x="object"===typeof m&&null!=m?a(m.target||m).closest("tr.jqgrow>td")[0]:null;if(!1!==q&&(d.extraparam[k.oper]===k.addoper||I.call(b,d,"beforeEditRow",d,e))&&"0"===(a(q).attr("editable")||"0")&&!a(q).hasClass("not-editable-row")){k=f.detectRowEditing.call(b,
e);if(null!=k&&"cellEditing"===k.mode){var k=k.savedRow,H=b.rows[k.id],u=D.call(b,"select");c.jqGrid("restoreCell",k.id,k.ic);a(H.cells[k.ic]).removeClass("edit-cell "+u);a(H).addClass(u).attr({"aria-selected":"true",tabindex:"0"})}f.enumEditableCells.call(b,q,a(q).hasClass("jqgrid-new-row")?"add":"edit",function(c){var g=c.cm,k=a(c.dataElement),d=c.dataWidth,v,l=g.name,m=g.edittype,q=c.iCol,t=g.editoptions||{};if("hidden"!==c.editable){try{v=a.unformat.call(this,c.td,{rowId:e,colModel:g},q)}catch(x){v=
"textarea"===m?k.text():k.html()}w[l]=v;k.html("");g=a.extend({},t,{id:e+"_"+l,name:l,rowId:e,mode:c.mode,cm:g,iCol:q});if("&nbsp;"===v||"&#160;"===v||1===v.length&&160===v.charCodeAt(0))v="";v=f.createEl.call(b,m,g,v,!0,a.extend({},f.ajaxOptions,h.ajaxSelectOptions||{}));a(v).addClass("editable");k.append(v);d&&a(v).width(c.dataWidth);f.bindEv.call(b,v,g);"select"===m&&!0===t.multiple&&void 0===t.dataUrl&&f.msie&&a(v).width(a(v).width());null===r&&(r=q);n++}});0<n&&(w.id=e,h.savedRow.push(w),a(q).attr("editable",
"1"),m&&("number"===typeof m&&parseInt(m,10)<=l.length?r=m:"string"===typeof m?r=h.iColByName[m]:null!=x&&(r=x.cellIndex),setTimeout(function(){var e=c.jqGrid("getNumberOfFrozenColumns"),f=function(a){return h.frozenColumns&&0<e&&r<e?b.grid.fbRows[q.rowIndex].cells[a]:q.cells[a]},g=function(b){return a(b).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},k=function(){return g(h.frozenColumns&&0<e?b.grid.fbRows[q.rowIndex]:q).first()},v=g(f(r));0<v.length?
v.first().focus():"number"===typeof d.defaultFocusField||"string"===typeof d.defaultFocusField?(v=g(f("number"===typeof d.defaultFocusField?d.defaultFocusField:h.iColByName[d.defaultFocusField])),0===v.length&&(v=k()),v.first().focus()):k().focus()},0)),!0===d.keys&&(l=a(q),h.frozenColumns&&(l=l.add(b.grid.fbRows[q.rowIndex])),l.bind("keydown",function(a){if(27===a.keyCode)return c.jqGrid("restoreRow",e,d.afterrestorefunc),!1;if(13===a.keyCode){if("TEXTAREA"===a.target.tagName)return!0;c.jqGrid("saveRow",
e,d);return!1}})),t.call(b,d.oneditfunc,"jqGridInlineEditRow",e,d))}}})},saveRow:function(e,d,l,h,c,n,H,x){var k=a.makeArray(arguments).slice(1),b={},g=this[0],m=a(g),p=null!=g?g.p:null,u=f.info_dialog,z=a.isFunction,L=null!=f.defaults&&z(f.defaults.fatalError)?f.defaults.fatalError:alert;if(g.grid&&null!=p){"object"===a.type(k[0])?b=k[0]:(z(d)&&(b.successfunc=d),void 0!==l&&(b.url=l),void 0!==h&&(b.extraparam=h),z(c)&&(b.aftersavefunc=c),z(n)&&(b.errorfunc=n),z(H)&&(b.afterrestorefunc=H),z(x)&&(b.beforeSaveRow=
x));var k=function(a){return m.jqGrid("getGridRes",a)},b=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:k("defaults.savetext")||"Saving..."},f.inlineEdit,p.inlineEditing||{},b),r={},J={},A={},B,F,q,E;q=m.jqGrid("getInd",e,!0);var C=a(q);B=p.prmNames;var M=k("errors.errcap"),N=k("edit.bClose"),K;if(!1!==q&&(k=b.extraparam[B.oper]===
B.addoper?"add":"edit",I.call(g,b,"beforeSaveRow",b,e,k)&&(B=C.attr("editable"),b.url=b.url||p.editurl,K="clientArray"!==b.url,"1"===B)))if(f.enumEditableCells.call(g,q,C.hasClass("jqgrid-new-row")?"add":"edit",function(b){var c=b.cm,p=c.formatter,k=c.editoptions||{},h=c.formatoptions||{},d={},l=(a.jgrid.detectRowEditing.call(g,e)||{}).savedRow,n=f.getEditedValue.call(g,a(b.dataElement),c,d,b.editable);"select"===c.edittype&&"select"!==c.formatter&&(J[c.name]=d.text);E=f.checkValues.call(g,n,b.iCol,
void 0,void 0,a.extend(b,{oldValue:null!=l?l[c.name]:null,newValue:n,oldRowData:l}));if(null!=E&&!1===E[0])return!1;"date"===p&&!0!==h.sendFormatted&&(n=a.unformat.date.call(g,n,c));K&&!0===k.NullIfEmpty&&""===n&&(n="null");r[c.name]=n}),null!=E&&!1===E[0])try{var G=m.jqGrid("getGridRowById",e),y=f.findPos(G);u.call(g,M,E[1],N,{left:y[0],top:y[1]+a(G).outerHeight()})}catch(O){L(E[1])}else if(G=e,B=p.prmNames,y=!1===p.keyName?B.id:p.keyName,r&&(r[B.oper]=B.editoper,void 0===r[y]||""===r[y]?r[y]=e:
q.id!==p.idPrefix+r[y]&&(q=f.stripPref(p.idPrefix,e),void 0!==p._index[q]&&(p._index[r[y]]=p._index[q],delete p._index[q]),e=p.idPrefix+r[y],C.attr("id",e),p.selrow===G&&(p.selrow=e),a.isArray(p.selarrrow)&&(q=a.inArray(G,p.selarrrow),0<=q&&(p.selarrrow[q]=e)),p.multiselect&&(q="jqg_"+p.id+"_"+e,C.find("input.cbox").attr("id",q).attr("name",q))),r=a.extend({},r,p.inlineData||{},b.extraparam)),K)m.jqGrid("progressBar",{method:"show",loadtype:b.saveui,htmlcontent:b.savetext}),A=a.extend({},r,A),A[y]=
f.stripPref(p.idPrefix,A[y]),p.autoEncodeOnEdit&&a.each(A,function(a,b){z(b)||(A[a]=f.oldEncodePostedData(b))}),a.ajax(a.extend({url:z(b.url)?b.url.call(g,A[y],k,A,b):b.url,data:f.serializeFeedback.call(g,z(b.serializeSaveData)?b.serializeSaveData:p.serializeRowData,"jqGridInlineSerializeSaveData",A),type:z(b.mtype)?b.mtype.call(g,k,b,A[y],A):b.mtype,complete:function(c,k){m.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});if((300>c.status||304===c.status)&&(0!==c.status||4!==c.readyState)){var h,
d;d=m.triggerHandler("jqGridInlineSuccessSaveRow",[c,e,b]);if(null==d||!0===d)d=[!0,r];d[0]&&z(b.successfunc)&&(d=b.successfunc.call(g,c));a.isArray(d)?(h=d[0],r=d[1]||r):h=d;if(!0===h){p.autoEncodeOnEdit&&a.each(r,function(a,b){r[a]=f.oldDecodePostedData(b)});r=a.extend({},r,J);m.jqGrid("setRowData",e,r);C.attr("editable","0");for(h=0;h<p.savedRow.length;h++)if(String(p.savedRow[h].id)===String(e)){F=h;break}0<=F&&p.savedRow.splice(F,1);t.call(g,b.aftersavefunc,"jqGridInlineAfterSaveRow",e,c,r,b);
C.removeClass("jqgrid-new-row").unbind("keydown")}else t.call(g,b.errorfunc,"jqGridInlineErrorSaveRow",e,c,k,null,b),!0===b.restoreAfterError&&m.jqGrid("restoreRow",e,b.afterrestorefunc)}},error:function(a,c,h){m.triggerHandler("jqGridInlineErrorSaveRow",[e,a,c,h,b]);if(z(b.errorfunc))b.errorfunc.call(g,e,a,c,h);else{a=a.responseText||a.statusText;try{u.call(g,M,'<div class="'+D.call(g,"error")+'">'+a+"</div>",N,{buttonalign:"right"})}catch(f){L(a)}}!0===b.restoreAfterError&&m.jqGrid("restoreRow",
e,b.afterrestorefunc)}},f.ajaxOptions,p.ajaxRowOptions,b.ajaxSaveOptions||{}));else{r=a.extend({},r,J);q=m.jqGrid("setRowData",e,r);C.attr("editable","0");for(k=0;k<p.savedRow.length;k++)if(String(p.savedRow[k].id)===String(G)){F=k;break}0<=F&&p.savedRow.splice(F,1);t.call(g,b.aftersavefunc,"jqGridInlineAfterSaveRow",e,q,r,b);C.removeClass("jqgrid-new-row").unbind("keydown")}}},restoreRow:function(e,d){var l=a.makeArray(arguments).slice(1),h={};"object"===a.type(l[0])?h=l[0]:a.isFunction(d)&&(h.afterrestorefunc=
d);return this.each(function(){var c=this,d=a(c),l=c.p,w=-1,k={},b;if(c.grid){var g=a.extend(!0,{},f.inlineEdit,l.inlineEditing||{},h),m=d.jqGrid("getInd",e,!0);if(!1!==m&&I.call(c,g,"beforeCancelRow",g,e)){for(b=0;b<l.savedRow.length;b++)if(String(l.savedRow[b].id)===String(e)){w=b;break}if(0<=w){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+f.jqID(m.id)).datepicker("hide")}catch(p){}a.each(l.colModel,function(){var b=this.name;l.savedRow[w].hasOwnProperty(b)&&(k[b]=l.savedRow[w][b],
!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(k[b]=a.unformat.date.call(c,k[b],this)))});d.jqGrid("setRowData",e,k);a(m).attr("editable","0").unbind("keydown");l.savedRow.splice(w,1);a("#"+f.jqID(e),c).hasClass("jqgrid-new-row")&&setTimeout(function(){d.jqGrid("delRowData",e);d.jqGrid("showAddEditButtons",!1)},0)}t.call(c,g.afterrestorefunc,"jqGridInlineAfterRestoreRow",e)}}})},addRow:function(e){return this.each(function(){if(this.grid){var d=
this,l=a(d),h=d.p,c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},f.inlineEdit,h.inlineEditing||{},e||{});I.call(d,c,"beforeAddRow",c.addRowParams)&&(c.rowID=a.isFunction(c.rowID)?c.rowID.call(d,c):null!=c.rowID?c.rowID:f.randId(),!0===c.useDefValues&&a(h.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue;c.initdata[this.name]=a.isFunction(e)?e.call(d):
e}}),c.rowID=h.idPrefix+c.rowID,l.jqGrid("addRowData",c.rowID,c.initdata,c.position),a("#"+f.jqID(c.rowID),d).addClass("jqgrid-new-row"),c.useFormatter?a("#"+f.jqID(c.rowID)+" .ui-inline-edit",d).click():(h=h.prmNames,c.addRowParams.extraparam[h.oper]=h.addoper,l.jqGrid("editRow",c.rowID,c.addRowParams),l.jqGrid("setSelection",c.rowID)))}})},inlineNav:function(e,t){"object"===typeof e&&(t=e,e=void 0);return this.each(function(){var l=this,h=a(l),c=l.p;if(this.grid&&null!=c){var n,u=e===c.toppager?
c.idSel+"_top":c.idSel,x=e===c.toppager?c.id+"_top":c.id,k=D.call(l,"disabled"),b=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},h.jqGrid("getGridRes","nav"),f.nav||{},c.navOptions||{},f.inlineNav||{},c.inlineNavOptions||{},t||{});if(void 0===e)if(c.pager)if(h.jqGrid("inlineNav",
c.pager,b),c.toppager)e=c.toppager,u=c.idSel+"_top",x=c.id+"_top";else return;else c.toppager&&(e=c.toppager,u=c.idSel+"_top",x=c.id+"_top");if(void 0!==e&&(n=a(e),!(0>=n.length))){0>=n.find(".navtable").length&&h.jqGrid("navGrid",e,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1});c._inlinenav=!0;if(!0===b.addParams.useFormatter){n=c.colModel;var g,m;for(g=0;g<n.length;g++)if(n[g].formatter&&"actions"===n[g].formatter){n[g].formatoptions&&(m={keys:!1,onEdit:null,onSuccess:null,afterSave:null,
onError:null,afterRestore:null,extraparam:{},url:null},n=a.extend(m,n[g].formatoptions),b.addParams.addRowParams={keys:n.keys,oneditfunc:n.onEdit,successfunc:n.onSuccess,url:n.url,extraparam:n.extraparam,aftersavefunc:n.afterSave,errorfunc:n.onError,afterrestorefunc:n.afterRestore});break}}b.add&&h.jqGrid("navButtonAdd",e,{caption:b.addtext,title:b.addtitle,commonIconClass:b.commonIconClass,buttonicon:b.addicon,iconsOverText:b.iconsOverText,id:x+"_iladd",onClickButton:function(){d(this,k)||h.jqGrid("addRow",
b.addParams)}});b.edit&&h.jqGrid("navButtonAdd",e,{caption:b.edittext,title:b.edittitle,commonIconClass:b.commonIconClass,buttonicon:b.editicon,iconsOverText:b.iconsOverText,id:x+"_iledit",onClickButton:function(){if(!d(this,k)){var a=c.selrow;a?h.jqGrid("editRow",a,b.editParams):l.modalAlert()}}});b.save&&(h.jqGrid("navButtonAdd",e,{caption:b.savetext,title:b.savetitle,commonIconClass:b.commonIconClass,buttonicon:b.saveicon,iconsOverText:b.iconsOverText,id:x+"_ilsave",onClickButton:function(){if(!d(this,
k)){var e=c.savedRow[0].id;if(e){var g=c.prmNames,m=g.oper,n=b.editParams;a("#"+f.jqID(e),l).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[m]=g.addoper,n=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[m]=g.editoper);h.jqGrid("saveRow",e,n)}else l.modalAlert()}}}),a(u+"_ilsave").addClass(k));b.cancel&&(h.jqGrid("navButtonAdd",e,{caption:b.canceltext,title:b.canceltitle,commonIconClass:b.commonIconClass,buttonicon:b.cancelicon,
iconsOverText:b.iconsOverText,id:x+"_ilcancel",onClickButton:function(){if(!d(this,k)){var e=c.savedRow[0].id,g=b.editParams;e?(a("#"+f.jqID(e),l).hasClass("jqgrid-new-row")&&(g=b.addParams.addRowParams),h.jqGrid("restoreRow",e,g)):l.modalAlert()}}}),a(u+"_ilcancel").addClass(k));!0===b.restoreAfterSelect&&h.bind("jqGridSelectRow",function(a,e){if(0<c.savedRow.length&&!0===c._inlinenav){var d=c.savedRow[0].id;e!==d&&"number"!==typeof d&&h.jqGrid("restoreRow",d,b.editParams)}});h.bind("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",
function(){h.jqGrid("showAddEditButtons",!1)});h.bind("jqGridInlineEditRow",function(a,b){h.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(e){return this.each(function(){if(this.grid){var d=this.p,f=d.idSel,h=D.call(this,"disabled"),c=f+"_ilsave,"+f+"_ilcancel"+(d.toppager?","+f+"_top_ilsave,"+f+"_top_ilcancel":""),d=f+"_iladd,"+f+"_iledit"+(d.toppager?","+f+"_top_iladd,"+f+"_top_iledit":"");a(e?d:c).addClass(h);a(e?c:d).removeClass(h)}})}})});
//# sourceMappingURL=grid.inlinedit.map
