var $jscomp={scope:{},findInternal:function(a,h,g){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var k=a[f];if(h.call(g,k,f,a))return{i:f,v:k}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[h]=g.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,h,g,e){if(h){g=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in g||(g[f]={});g=g[f]}a=a[a.length-1];e=g[a];h=h(e);h!=e&&null!=h&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var h=a.jgrid,g=h.jqID,e=a.fn.jqGrid,f=function(){var d=a.makeArray(arguments);d[0]="subGrid"+d[0].charAt(0).toUpperCase()+d[0].substring(1);d.unshift("");d.unshift("");d.unshift(this.p);return h.feedback.apply(this,d)},k=function(d,h){return this.each(function(){if(this.grid&&null!=d&&!0===this.p.subGrid){var c=a(this).jqGrid("getInd",d,!0);
a(c).find(">td."+h).trigger("click")}})};h.extend({setSubGrid:function(){return this.each(function(){var d=this.p,e=d.subGridModel[0];d.subGridOptions=a.extend({expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},d.subGridOptions||{});d.colNames.unshift("");d.colModel.unshift({name:"subgrid",width:h.cell_width?d.subGridWidth+d.cellLayout:d.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0});if(e)for(e.align=
a.extend([],e.align||[]),d=0;d<e.name.length;d++)e.align[d]=e.align[d]||"left"})},addSubGridCell:function(d,g,c,b){var l=this[0],f=l.p.subGridOptions;c=a.isFunction(f.hasSubgrid)?f.hasSubgrid.call(l,{rowid:c,iRow:g,iCol:d,data:b}):!0;return null==l||null==l.p||null==f?"":"<td role='gridcell' class='"+e.getGuiStyles.call(this,"subgrid.tdStart",c?"ui-sgcollapsed sgcollapsed":"")+"' "+l.formatCol(d,g)+">"+(c?"<div class='"+e.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+
e.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+h.mergeCssClasses(f.commonIconClass,f.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(d,k){return this.each(function(){var c=this,b=c.p,l=b.subGridModel[0],p=function(a,b){return e.getGuiStyles.call(c,"subgrid."+a,b||"")},z=p("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+b.direction),y=p("rowSubTable","ui-subtblcell"),A=p("row","ui-subgrid ui-row-"+b.direction),B=p("tdWithIcon","subgrid-cell"),C=p("tdData",
"subgrid-data"),q=function(b,d,c){c=l.align[c];d=a("<td"+(c?" style='text-align:"+c+";'":"")+"></td>").html(d);b.append(d)},v=function(c,d){var e=b.xmlReader.subgrid;a(e.root+" "+e.row,c).each(function(){var b,c,h=a("<tr class='"+y+"'></tr>");if(!0===e.repeatitems)a(e.cell,this).each(function(b){q(h,a(this).text()||"&#160;",b)});else if(b=l.mapping||l.name)for(c=0;c<b.length;c++)q(h,a(b[c],this).text()||"&#160;",c);d.append(h)})},w=function(c,d){var e,r,m,g,f,k=b.jsonReader.subgrid,n=h.getAccessor(c,
k.root);if(null!=n)for(r=0;r<n.length;r++){f=n[r];e=a("<tr class='"+y+"'></tr>");if(!0===k.repeatitems)for(k.cell&&(f=f[k.cell]),m=0;m<f.length;m++)q(e,f[m]||"&#160;",m);else if(g=l.mapping||l.name,g.length)for(m=0;m<g.length;m++)q(e,f[g[m]]||"&#160;",m);d.append(e)}},t=function(d,e,h){var f,m;f=p("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===b.altRows&&a(c).jqGrid("isBootstrapGuiStyle")?" table-striped":""));var k=a("<table"+(f?" style='width:1px' role='presentation' class='"+f+"'":"")+"><thead></thead><tbody></tbody></table>"),
n=a("<tr></tr>");c.grid.endReq.call(c);for(m=0;m<l.name.length;m++)f=a("<th class='"+z+"'></th>").html(l.name[m]).width(l.width[m]),n.append(f);n.appendTo(k[0].tHead);h(d,a(k[0].tBodies[0]));a("#"+g(b.id+"_"+e)).append(k);return!1},D=function(d){var e=a(d).attr("id"),f={nd_:(new Date).getTime()},g,m;f[b.prmNames.subgridid]=e;if(!l)return!1;if(l.params)for(m=0;m<l.params.length;m++)g=b.iColByName[l.params[m]],void 0!==g&&(f[b.colModel[g].name]=a(d.cells[g]).text().replace(/\&#160\;/ig,""));if(!c.grid.hDiv.loading)switch(c.grid.beginReq.call(c),
b.subgridtype||(b.subgridtype=b.datatype),a.isFunction(b.subgridtype)?b.subgridtype.call(c,f):b.subgridtype=b.subgridtype.toLowerCase(),b.subgridtype){case "xml":case "json":a.ajax(a.extend({type:b.mtype,url:a.isFunction(b.subGridUrl)?b.subGridUrl.call(c,f):b.subGridUrl,dataType:b.subgridtype,context:e,data:h.serializeFeedback.call(c,b.serializeSubGridData,"jqGridSerializeSubGridData",f),success:function(a){t(a,this,"xml"===b.subgridtype?v:w)},error:function(d,e,f){var g=void 0===b.loadSubgridError?
b.loadError:b.loadSubgridError;c.grid.endReq.call(c);a.isFunction(g)&&g.call(c,d,e,f);b.subGridOptions.noEmptySubgridOnError||t(null,this,"xml"===b.subgridtype?v:w)}},h.ajaxOptions,b.ajaxSubgridOptions||{}))}return!1},E=function(){var g=a(this).parent("tr")[0],k=g.nextSibling,l=g.id,n=b.id+"_"+l,m=function(a){return h.mergeCssClasses(b.subGridOptions.commonIconClass,b.subGridOptions[a])},p=1;a.each(b.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||p++});if(a(this).hasClass("sgcollapsed")){if(!0===
b.subGridOptions.reloadOnExpand||!1===b.subGridOptions.reloadOnExpand&&!a(k).hasClass("ui-subgrid")){k=1<=d?"<td colspan='"+d+"'>&#160;</td>":"";if(!f.call(c,"beforeExpand",n,l))return;a(g).after("<tr role='row' class='"+A+"'>"+k+"<td class='"+B+"'><span class='"+m("openicon")+"'></span></td><td colspan='"+parseInt(b.colNames.length-p,10)+"' class='"+C+"'><div id='"+n+"' class='tablediv'></div></td></tr>");a(c).triggerHandler("jqGridSubGridRowExpanded",[n,l]);a.isFunction(b.subGridRowExpanded)?b.subGridRowExpanded.call(c,
n,l):D(g)}else a(k).show();a(this).html("<div class='"+e.getGuiStyles.call(c,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+e.getGuiStyles.call(c,"subgrid.button","sgbutton")+"'><span class='"+m("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded");b.subGridOptions.selectOnExpand&&a(c).jqGrid("setSelection",l)}else if(a(this).hasClass("sgexpanded")){if(!f.call(c,"beforeCollapse",n,l))return;!0===b.subGridOptions.reloadOnExpand?a(k).remove(".ui-subgrid"):
a(k).hasClass("ui-subgrid")&&a(k).hide();a(this).html("<div class='"+e.getGuiStyles.call(c,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+e.getGuiStyles.call(c,"subgrid.button","sgbutton")+"'><span class='"+m("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed");b.subGridOptions.selectOnCollapse&&a(c).jqGrid("setSelection",l)}return!1},x,n,u=1;if(c.grid){x=c.rows.length;void 0!==k&&0<k&&(u=k,x=k+1);for(;u<x;)n=c.rows[u],a(n).hasClass("jqgrow")&&(n=
a(n.cells[d]),n.hasClass("ui-sgcollapsed")&&(b.scroll&&n.unbind("click"),n.bind("click",E))),u++;!0===b.subGridOptions.expandOnLoad&&a(c.rows).filter(".jqgrow").each(function(b,d){a(d.cells[0]).click()});c.subGridXml=function(a,b){return t(a,b,v)};c.subGridJson=function(a,b){return t(a,b,w)}}})},expandSubGridRow:function(a){return k.call(this,a,"sgcollapsed")},collapseSubGridRow:function(a){return k.call(this,a,"sgexpanded")},toggleSubGridRow:function(a){return k.call(this,a,"ui-sgcollapsed")}})});
//# sourceMappingURL=grid.subgrid.map
