var $jscomp={scope:{},findInternal:function(b,t,h){b instanceof String&&(b=String(b));for(var c=b.length,g=0;g<c;g++){var f=b[g];if(t.call(h,f,g,b))return{i:g,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,t,h){if(h.get||h.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[t]=h.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,t,h,c){if(t){h=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var g=b[c];g in h||(h[g]={});h=h[g]}b=b[b.length-1];c=h[b];t=t(c);t!=c&&null!=t&&$jscomp.defineProperty(h,b,{configurable:!0,writable:!0,value:t})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,h){return $jscomp.findInternal(this,b,h).v}},"es6-impl","es3");
(function(b){"function"===typeof define&&define.amd?define(["jquery","./grid.base"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var t=b.jgrid,h=b.fn.jqGrid;t.extend({groupingSetup:function(){return this.each(function(){var c,g;g=this.p;var f=g.colModel,a=g.groupingView,e,u,l=function(){return""};if(null===a||"object"!==typeof a&&!b.isFunction(a))g.grouping=!1;else if(a.groupField.length){void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);a.lastvalues=
[];a._locgr||(a.groups=[]);a.counters=[];for(c=0;c<a.groupField.length;c++)a.groupOrder[c]||(a.groupOrder[c]="asc"),a.groupText[c]||(a.groupText[c]="{0}"),"boolean"!==typeof a.groupColumnShow[c]&&(a.groupColumnShow[c]=!0),"boolean"!==typeof a.groupSummary[c]&&(a.groupSummary[c]=!1),a.groupSummaryPos[c]||(a.groupSummaryPos[c]="footer"),e=f[g.iColByName[a.groupField[c]]],!0===a.groupColumnShow[c]?(a.visibiltyOnNextGrouping[c]=!0,null!=e&&!0===e.hidden&&h.showCol.call(b(this),a.groupField[c])):(a.visibiltyOnNextGrouping[c]=
b("#"+t.jqID(g.id+"_"+a.groupField[c])).is(":visible"),null!=e&&!0!==e.hidden&&h.hideCol.call(b(this),a.groupField[c]));a.summary=[];a.hideFirstGroupCol&&(a.formatDisplayField[0]=function(a){return a});c=0;for(g=f.length;c<g;c++)e=f[c],a.hideFirstGroupCol&&!e.hidden&&a.groupField[0]===e.name&&(e.formatter=l),e.summaryType&&(u={nm:e.name,st:e.summaryType,v:"",sr:e.summaryRound,srt:e.summaryRoundType||"round"},e.summaryDivider&&(u.sd=e.summaryDivider,u.vd=""),a.summary.push(u))}else g.grouping=!1})},
groupingPrepare:function(c,g){this.each(function(){var f=this.p.groupingView,a=f.groups,e=f.counters,u=f.lastvalues,l=f.isInTheSameGroup,r=f.groupField.length,n,d,w,t,k,m,C=!1,A=h.groupingCalculations.handler;for(n=0;n<r;n++)if(t=f.groupField[n],d=f.displayField[n],k=c[t],m=null==d?null:c[d],null==m&&(m=k),void 0!==k){w=[];for(d=0;d<=n;d++)w.push(c[f.groupField[d]]);t={idx:n,dataIndex:t,value:k,displayValue:m,startRow:g,cnt:1,keys:w,summary:[]};0===g?(a.push(t),u[n]=k,d={cnt:1,pos:a.length-1,summary:b.extend(!0,
[],f.summary)},e[n]=d):(d={cnt:1,pos:a.length,summary:b.extend(!0,[],f.summary)},"object"===typeof k||(b.isArray(l)&&b.isFunction(l[n])?l[n].call(this,u[n],k,n,f):u[n]===k)?C?(a.push(t),u[n]=k,e[n]=d):(d=e[n],d.cnt+=1,a[d.pos].cnt=d.cnt):(a.push(t),u[n]=k,C=!0,e[n]=d));k=a[d.pos];var v;for(w=0;w<d.summary.length;w++)m=d.summary[w],v=b.isArray(m.st)?m.st[t.idx]:m.st,b.isFunction(v)?m.v=v.call(this,m.v,m.nm,c,t):(m.v=A.call(b(this),v,m.v,m.nm,m.sr,m.srt,c),"avg"===v.toLowerCase()&&m.sd&&(m.vd=A.call(b(this),
v,m.vd,m.sd,m.sr,m.srt,c)));k.summary=d.summary}});return this},groupingToggle:function(c,g){this.each(function(){var f=this.p,a=f.groupingView,e=a.minusicon,u=a.plusicon,l=g?b(g).closest("tr.jqgroup"):b("#"+t.jqID(c)),r,n,d=!0,h=!1,x=[],k=function(a){var b,c=a.length;for(b=0;b<c;b++)x.push(a[b])},m=parseInt(l.data("jqgrouplevel"),10);f.frozenColumns&&0<l.length&&(n=l[0].rowIndex,l=b(this.rows[n]),l=l.add(this.grid.fbRows[n]));r=l.find(">td>span.tree-wrap");t.hasAllClasses(r,e)?(r.removeClass(e).addClass(u),
h=!0):r.removeClass(u).addClass(e);for(l=l.next();l.length;l=l.next())if(l.hasClass("jqfoot"))if(r=parseInt(l.data("jqfootlevel"),10),h){if(r=parseInt(l.data("jqfootlevel"),10),(!a.showSummaryOnHide&&r===m||r>m)&&k(l),r<m)break}else{if((r===m||a.showSummaryOnHide&&r===m+1)&&k(l),r<=m)break}else if(l.hasClass("jqgroup"))if(r=parseInt(l.data("jqgrouplevel"),10),h){if(r<=m)break;k(l)}else{if(r<=m)break;r===m+1&&(l.find(">td>span.tree-wrap").removeClass(e).addClass(u),k(l));d=!1}else(h||d)&&k(l);b(x).css("display",
h?"none":"");f.frozenColumns&&b(this).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:n,iRowEnd:l.length?l[0].rowIndex-1:-1}}}]);this.fixScrollOffsetAndhBoxPadding();b(this).triggerHandler("jqGridGroupingClickGroup",[c,h]);b.isFunction(f.onClickGroup)&&f.onClickGroup.call(this,c,h)});return!1},groupingRender:function(c,g){function f(a,c,g,f,l){var m=v[a],q,h="",n,d,r,w=0,x,A,C,F=!0;if(0!==
c&&0!==v[a].idx)for(q=a;0<=q;q--)if(v[q].idx===v[a].idx-c){m=v[q];break}a=m.cnt;for(x=void 0===l?f:0;x<G;x++){c="&#160;";q=y[x];for(n=0;n<m.summary.length;n++)if(d=m.summary[n],A=b.isArray(d.st)?d.st[g.idx]:d.st,C=b.isArray(q.summaryTpl)?q.summaryTpl[g.idx]:q.summaryTpl||"{0}",d.nm===q.name){"string"===typeof A&&"avg"===A.toLowerCase()&&(d.sd&&d.vd?d.v/=d.vd:d.v&&0<a&&(d.v/=a));try{d.groupCount=m.cnt,d.groupIndex=m.dataIndex,d.groupValue=m.value,r=e.formatter("",d.v,x,d)}catch(H){r=d.v}c=t.format(C,
r);q.summaryFormat&&(c=q.summaryFormat.call(e,g,c,r,q,d));break}d=n=!1;void 0!==l&&F&&!q.hidden&&(c=l,F=!1,1<f&&(n=!0,w=f-1),d=q.align,q.align="rtl"===u.direction?"right":"left",k.iconColumnName=q.name);0<w&&!q.hidden&&"&#160;"===c?(d&&(q.align=d),w--):(h+="<td role='gridcell' "+e.formatCol(x,1,"")+(n?"colspan='"+f+"'":"")+">"+c+"</td>",d&&(q.align=d))}return h}var a="",e=this[0],u=e.p,l=0,r,n=[],d="",w,x,k=u.groupingView,m=b.makeArray(k.groupSummary),C=(k.groupCollapse?k.plusicon:k.minusicon)+" tree-wrap",
A=k.groupField.length,v=k.groups,y=u.colModel,G=y.length,F=u.page,H=h.getGuiStyles.call(e,"gridRow","jqgroup ui-row-"+u.direction),I=h.getGuiStyles.call(e,"gridRow","jqfoot ui-row-"+u.direction);b.each(y,function(a,c){var b;for(b=0;b<A;b++)if(k.groupField[b]===c.name){n[b]=a;break}});m.reverse();b.each(v,function(h,p){if(k._locgr&&!(p.startRow+p.cnt>(F-1)*g&&p.startRow<F*g))return!0;l++;x=u.id+"ghead_"+p.idx;w=x+"_"+h;d="<span style='cursor:pointer;margin-"+("rtl"===u.direction?"right:":"left:")+
12*p.idx+"px;' class='"+k.commonIconClass+" "+C+"' onclick=\"jQuery('#"+t.jqID(u.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+w+"', this);return false;\"></span>";try{b.isArray(k.formatDisplayField)&&b.isFunction(k.formatDisplayField[p.idx])?(p.displayValue=k.formatDisplayField[p.idx].call(e,p.displayValue,p.value,y[n[p.idx]],p.idx,k),r=p.displayValue):r=e.formatter(w,p.displayValue,n[p.idx],p.value)}catch(J){r=p.displayValue}a+="<tr id='"+w+"' data-jqgrouplevel='"+p.idx+"' "+(k.groupCollapse&&
0<p.idx?"style='display:none;' ":"")+"role='row' class='"+H+" "+x+"'>";var z=b.isFunction(k.groupText[p.idx])?k.groupText[p.idx].call(e,r,p.cnt,p.summary):t.template(k.groupText[p.idx],r,p.cnt,p.summary),D,E,B,q;q=0;B=A-1===p.idx;"string"!==typeof z&&"number"!==typeof z&&(z=r);"header"===k.groupSummaryPos[p.idx]?(D=1,"cb"!==y[0].name&&"cb"!==y[1].name||D++,"subgrid"!==y[0].name&&"subgrid"!==y[1].name||D++,a+=f(h,0,p,D,d+"<span class='cell-wrapper'>"+z+"</span>")):a+="<td role='gridcell' style='padding-left:"+
12*p.idx+"px;' colspan='"+G+"'>"+d+z+"</td>";a+="</tr>";if(B){z=v[h+1];B=p.startRow;D=void 0!==z?z.startRow:v[h].startRow+v[h].cnt;k._locgr&&(q=(F-1)*g,q>p.startRow&&(B=q));for(;B<D&&c[B-q];B++)a+=c[B-q].join("");if("header"!==k.groupSummaryPos[p.idx]){if(void 0!==z){for(E=0;E<k.groupField.length&&z.dataIndex!==k.groupField[E];E++);l=k.groupField.length-E}for(q=0;q<l;q++)m[q]&&(a+="<tr data-jqfootlevel='"+(p.idx-q)+(k.groupCollapse&&(0<p.idx-q||!k.showSummaryOnHide)?"' style='display:none;'":"'")+
" role='row' class='"+I+"'>",a+=f(h,q,v[p.idx-q],0),a+="</tr>");l=E}}});this.unbind("jqGridShowHideCol.groupingRender").bind("jqGridShowHideCol.groupingRender",function(){var a=u.iColByName[k.iconColumnName],c,d,g;if(0<=b.inArray("header",k.groupSummaryPos)){for(c=0;c<y.length;c++)if(!y[c].hidden){g=c;break}if(void 0!==g&&a!==g){for(c=0;c<e.rows.length;c++)d=e.rows[c],b(d).hasClass("jqgroup")&&(b(d.cells[g]).html(d.cells[a].innerHTML),b(d.cells[a]).html("&nbsp;"));k.iconColumnName=y[g].name}}});return a},
groupingGroupBy:function(c,g){return this.each(function(){var f=this.p,a=f.groupingView,e,u;"string"===typeof c&&(c=[c]);f.grouping=!0;a._locgr=!1;void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);for(e=0;e<a.groupField.length;e++)u=f.colModel[f.iColByName[a.groupField[e]]],!a.groupColumnShow[e]&&a.visibiltyOnNextGrouping[e]&&null!=u&&!0===u.hidden&&h.showCol.call(b(this),a.groupField[e]);for(e=0;e<c.length;e++)a.visibiltyOnNextGrouping[e]=b(f.idSel+"_"+t.jqID(c[e])).is(":visible");
f.groupingView=b.extend(f.groupingView,g||{});a.groupField=c;b(this).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){var g=this.p,f=this.tBodies[0],a=g.groupingView;void 0===c&&(c=!0);g.grouping=!1;if(!0===c){for(g=0;g<a.groupField.length;g++)!a.groupColumnShow[g]&&a.visibiltyOnNextGrouping[g]&&h.showCol.call(b(this),a.groupField);b("tr.jqgroup, tr.jqfoot",f).remove();b("tr.jqgrow",f).filter(":hidden").show()}else b(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(c,
b,f,a,e,h){var l={sum:function(){return parseFloat(b||0)+parseFloat(h[f]||0)},min:function(){return""===b?parseFloat(h[f]||0):Math.min(parseFloat(b),parseFloat(h[f]||0))},max:function(){return""===b?parseFloat(h[f]||0):Math.max(parseFloat(b),parseFloat(h[f]||0))},count:function(){""===b&&(b=0);return h.hasOwnProperty(f)?b+1:0},avg:function(){return l.sum()}};if(!l[c])throw"jqGrid Grouping No such method: "+c;c=l[c]();null!=a&&("fixed"===e?c=c.toFixed(a):(a=Math.pow(10,a),c=Math.round(c*a)/a));return c}}})});
//# sourceMappingURL=grid.grouping.map
