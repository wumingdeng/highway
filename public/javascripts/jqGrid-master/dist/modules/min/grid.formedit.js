var $jscomp={scope:{},findInternal:function(a,m,u){a instanceof String&&(a=String(a));for(var x=a.length,F=0;F<x;F++){var S=a[F];if(m.call(u,S,F,a))return{i:F,v:S}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,m,u){if(u.get||u.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[m]=u.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,m,u,x){if(m){u=$jscomp.global;a=a.split(".");for(x=0;x<a.length-1;x++){var F=a[x];F in u||(u[F]={});u=u[F]}a=a[a.length-1];x=u[a];m=m(x);m!=x&&null!=m&&$jscomp.defineProperty(u,a,{configurable:!0,writable:!0,value:m})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,u){return $jscomp.findInternal(this,a,u).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common","./jsonxml"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var m=a.jgrid,u=m.jqID,x=a.fn.jqGrid,F=x.getGuiStyles,S=m.mergeCssClasses,U=m.hasOneFromClasses,ja=m.feedback,ka=m.fullBoolFeedback,O=m.builderFmButon,ca=function(a,m,c){!0===m[0]&&(c="<span class='"+S("fm-button-icon",c,m[2])+"'></span>","right"===m[1]?a.addClass("fm-button-icon-right").append(c):
a.addClass("fm-button-icon-left").prepend(c))},Q=function(a){return F.call(this,"states."+a)},da=function(a){return"&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0)};m.extend({searchGrid:function(q){return this.each(function(){function T(b){t("beforeShow",b)&&(a(v).data("onClose",d.onClose),m.viewModal.call(c,v,{gbox:y,jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass,toTop:d.toTop,onHide:function(a){a.w.remove();a.o&&a.o.remove()}}),t("afterShow",b))}var c=this,
p=a(c),l=c.p;if(c.grid&&null!=l){var d=a.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,
onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},x.getGridRes.call(p,"search"),m.search||{},l.searching||{},q||{}),e="fbox_"+l.id,g=d.commonIconClass,k={themodal:"searchmod"+e,modalhead:"searchhd"+e,modalcontent:"searchcnt"+e,resizeAlso:e},
v="#"+u(k.themodal),y=l.gBox,f=l.gView,n=a.each,r=l.postData[d.sFilter],t=function(){var b=a.makeArray(arguments);b.unshift("Search");b.unshift("Filter");b.unshift(d);return ja.apply(c,b)},C=function(){m.hideModal(v,{gb:y,jqm:d.jqModal,onClose:d.onClose,removemodal:d.removemodal})};"string"===typeof r&&(r=""!==a.trim(r)?a.parseJSON(r):void 0);a(v).remove();if(void 0!==a(v)[0])T(a("#fbox_"+u(l.id)));else{var H=a("<div><div id='"+e+"' class='"+F.call(c,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(f);
"rtl"===l.direction&&H.attr("dir","rtl");var I="",b="",A,K=!1,z,D=-1,w=a.extend([],l.colModel);z=O.call(c,e+"_search",d.Find,S(g,d.findDialogIcon),"right");var L=O.call(c,e+"_reset",d.Reset,S(g,d.resetDialogIcon),"left");d.showQuery&&(I=O.call(c,e+"_query","Query",S(g,d.queryDialogIcon),"left")+"&#160;");d.searchForAdditionalProperties&&n(l.additionalProperties,function(){var a="string"===typeof this?{name:this}:this;a.label||(a.label=a.name);a.isAddProp=!0;w.push(a)});d.columns.length?(w=d.columns,
D=0,A=w[0].index||w[0].name):n(w,function(a,b){b.label||(b.label=b.isAddProp?b.name:l.colNames[a]);if(!K){var d=void 0===b.search?!0:b.search,e=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&d||d&&!e)K=!0,A=b.index||b.name,D=a}});if(!r&&A||!1===d.multipleSearch)g="eq",0<=D&&w[D].searchoptions&&w[D].searchoptions.sopt?g=w[D].searchoptions.sopt[0]:d.sopt&&d.sopt.length&&(g=d.sopt[0]),r={groupOp:"AND",rules:[{field:A,op:g,data:""}]};K=!1;d.tmplNames&&d.tmplNames.length&&(K=!0,b=
d.tmplLabel,b+="<select class='ui-template'>",b+="<option value='default'>Default</option>",n(d.tmplNames,function(a,d){b+="<option value='"+a+"'>"+d+"</option>"}),b+="</select>");z="<div class='"+F.call(c,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+e+"_2'><tbody><tr><td colspan='2'><hr class='"+F.call(c,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+l.direction+"'  style='float:"+("rtl"===l.direction?"right":"left")+
";'>"+L+b+"</td><td class='EditButton EditButton-"+l.direction+"'>"+I+z+"</td></tr></tbody></table></div>";e=u(e);d.gbox=y;d.height="auto";e="#"+e;a(e).jqFilter({columns:w,filter:d.loadDefaults?r:null,showQuery:d.showQuery,errorcheck:d.errorcheck,sopt:d.sopt,groupButton:d.multipleGroup,ruleButtons:d.multipleSearch,afterRedraw:d.afterRedraw,ops:d.odata,cops:l.customSortOperations,operands:d.operands,ajaxSelectOptions:l.ajaxSelectOptions,groupOps:d.groupOps,onChange:function(b,f,n){b.showQuery&&a(".query",
n).text(f.toUserFriendlyString());ka.call(c,d.afterChange,"jqGridFilterAfterChange",a(e),d,b,f)},direction:l.direction,id:l.id});H.append(z);K&&d.tmplFilters&&d.tmplFilters.length&&a(".ui-template",H).bind("change",function(){var b=a(this).val();"default"===b?a(e).jqFilter("addFilter",r):a(e).jqFilter("addFilter",d.tmplFilters[parseInt(b,10)]);return!1});!0===d.multipleGroup&&(d.multipleSearch=!0);t("onInitialize",a(e));d.layer?m.createModal.call(c,k,H,d,f,a(y)[0],"#"+u(d.layer),{position:"relative"}):
m.createModal.call(c,k,H,d,f,a(y)[0]);(d.searchOnEnter||d.closeOnEscape)&&a(v).keydown(function(b){var f=a(b.target);if(!(!d.searchOnEnter||13!==b.which||f.hasClass("add-group")||f.hasClass("add-rule")||f.hasClass("delete-group")||f.hasClass("delete-rule")||f.hasClass("fm-button")&&f.is("[id$=_query]")))return a(e+"_search").click(),!1;if(d.closeOnEscape&&27===b.which)return a("#"+u(k.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});I&&a(e+"_query").bind("click",function(){a(".queryresult",
H).toggle();return!1});void 0===d.stringResult&&(d.stringResult=d.multipleSearch);a(e+"_search").bind("click",function(){var b={},f="",k,m=a(e);k=m.find(".input-elm");k.filter(":focus")&&(k=k.filter(":focus"));k.change();k=m.jqFilter("filterData");if(d.errorcheck&&(m[0].hideError(),d.showQuery||m.jqFilter("toSQLString"),m[0].p.error))return m[0].showError(),!1;if(d.stringResult||"local"===l.datatype){try{f=window.JSON&&window.JSON.stringify?JSON.stringify(k):xmlJsonClass.toJson(k,"","",!1)}catch(t){}"string"===
typeof f&&(b[d.sFilter]=f,n([d.sField,d.sValue,d.sOper],function(){b[this]=""}))}else d.multipleSearch?(b[d.sFilter]=k,n([d.sField,d.sValue,d.sOper],function(){b[this]=""})):(b[d.sField]=k.rules[0].field,b[d.sValue]=k.rules[0].data,b[d.sOper]=k.rules[0].op,b[d.sFilter]="");l.search=!0;a.extend(l.postData,b);ka.call(c,d.onSearch,"jqGridFilterSearch",l.filters)&&p.trigger("reloadGrid",[a.extend({page:1},d.reloadGridSearchOptions||{})]);d.closeAfterSearch&&C();return!1});a(e+"_reset").bind("click",function(){var b=
{},f=a(e);l.search=!1;l.resetsearch=!0;!1===d.multipleSearch?b[d.sField]=b[d.sValue]=b[d.sOper]="":b[d.sFilter]="";f[0].resetFilter();K&&a(".ui-template",H).val("default");a.extend(l.postData,b);ka.call(c,d.onReset,"jqGridFilterReset")&&p.trigger("reloadGrid",[a.extend({page:1},d.reloadGridResetOptions||{})]);d.closeAfterReset&&C();return!1});T(a(e));var B=Q.call(c,"hover");a(".fm-button:not(."+Q.call(c,"disabled").split(" ").join(".")+")",H).hover(function(){a(this).addClass(B)},function(){a(this).removeClass(B)})}}})},
editGridRow:function(q,T){return this.each(function(){function c(){a(D+" > tbody > tr > td .FormElement").each(function(){var M=a(".customelement",this),d=this.name;if(M.length){if(d=M.attr("name"),M=ea[d],void 0!==M&&(M=P[M],M=M.editoptions||{},a.isFunction(M.custom_value))){try{if(h[d]=M.custom_value.call(n,a("#"+u(d),D),"get"),void 0===h[d])throw"e1";}catch(f){"e1"===f?m.info_dialog.call(n,fa,"function 'custom_value' "+b.msg.novalue,b.bClose):m.info_dialog.call(n,fa,f.message,b.bClose)}return!0}}else switch(M=
a(this)[0].type,M){case "checkbox":h[d]=a(this).is(":checked")?a(this).val():a(this).data("offval");break;case "select-one":h[d]=a("option:selected",this).val();break;case "select-multiple":h[d]=a(this).val();h[d]=h[d]?h[d].join(","):"";a("option:selected",this).each(function(b,d){a(d).text()});break;case "date":h[d]=a(this).val();3===String(h[d]).split("-").length&&(M=ea[d],void 0!==M&&(M=P[M],M=M.formatoptions||{},M=M.newformat||H.call(r,"formatter.date.newformat"),h[d]=m.parseDate.call(r[0],"Y-m-d",
h[d],M)));break;default:void 0!==M&&0>a.inArray(M,b.skipPostTypes)&&(h[d]=a(this).val())}});return!0}function p(d,f,e){var E=0,c=[],h=!1,k="",l;for(l=1;l<=e;l++)k+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==d&&(h=x.getInd.call(r,d));a(P).each(function(l){var w=this.name,g,q,p,r,x;g=this.editable;var v=!1,J=!1;x="_empty"===d?"addForm":"editForm";a.isFunction(g)&&(g=g.call(n,{rowid:d,iCol:l,iRow:h,cmName:w,cm:this,mode:x}));r=(this.editrules&&!0===this.editrules.edithidden?
0:!0===this.hidden||"hidden"===g)?"style='display:none'":"";switch(String(g).toLowerCase()){case "hidden":g=!0;break;case "disabled":v=g=!0;break;case "readonly":J=g=!0}if("cb"!==w&&"subgrid"!==w&&!0===g&&"rn"!==w){if(!1===h)p="";else{g=a(n.rows[h].cells[l]);try{p=a.unformat.call(n,g,{rowId:d,colModel:this},l)}catch(z){p=this.edittype&&"textarea"===this.edittype?g.text():g.html()}da(p)&&(p="")}g=a.extend({},this.editoptions||{},{id:w,name:w,rowId:d,mode:x,cm:this,iCol:l});var G=a.extend({},{elmprefix:"",
elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),y=parseInt(G.rowpos,10)||E+1,B=parseInt(2*(parseInt(G.colpos,10)||1),10);"_empty"===d&&g.defaultValue&&(p=a.isFunction(g.defaultValue)?g.defaultValue.call(n):g.defaultValue);this.edittype||(this.edittype="text");t.autoEncodeOnEdit&&(p=m.oldDecodePostedData(p));x=m.createEl.call(n,this.edittype,g,p,!1,a.extend({},m.ajaxOptions,t.ajaxSelectOptions||{}));if(b.checkOnSubmit||b.checkOnUpdate)b._savedData[w]=p;a(x).addClass("FormElement");-1<
a.inArray(this.edittype,["text","textarea","checkbox","password","select"])&&a(x).addClass(F.call(n,"dialog.dataField"));q=a(f).find("tr[data-rowpos="+y+"]");if(G.rowabove){var L=a("<tr><td class='contentinfo' colspan='"+2*e+"'>"+G.rowcontent+"</td></tr>");a(f).append(L);L[0].rp=y}0===q.length&&(q=a("<tr "+r+" data-rowpos='"+y+"'></tr>").addClass("FormData").attr("id","tr_"+w),a(q).append(k),a(f).append(q),q[0].rp=y);r=a("td:eq("+(B-2)+")",q[0]);q=a("td:eq("+(B-1)+")",q[0]);r.html(void 0===G.label?
t.colNames[l]:G.label||"&#160;");q[da(q.html())?"html":"append"](G.elmprefix).append(x).append(G.elmsuffix);v?(r.addClass(V),q.addClass(V),a(x).prop("readonly",!0),a(x).prop("disabled",!0)):J&&a(x).prop("readonly",!0);"custom"===this.edittype&&a.isFunction(g.custom_value)&&g.custom_value.call(n,a("#"+u(w),A),"set",p);m.bindEv.call(n,x,g);c[E]=l;E++}});0<E&&(l=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+
C+"_id' value='"+d+"'/></td></tr>"),l[0].rp=E+999,a(f).append(l),b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[C+"_id"]=d);return c}function l(d,f){var e,E=0,c,h,g,k;if(b.checkOnSubmit||b.checkOnUpdate)b._savedData={},b._savedData[C+"_id"]=d;var l=t.colModel;if("_empty"===d)a(l).each(function(){e=this.name;h=a.extend({},this.editoptions||{});(c=a("#"+u(e),f))&&c.length&&null!==c[0]&&(g="","custom"===this.edittype&&a.isFunction(h.custom_value)?h.custom_value.call(n,c,"set",g):h.defaultValue?(g=
a.isFunction(h.defaultValue)?h.defaultValue.call(n):h.defaultValue,"checkbox"===c[0].type?(k=g.toLowerCase(),0>k.search(/(false|f|0|no|n|off|undefined)/i)&&""!==k?(c[0].checked=!0,c[0].defaultChecked=!0,c[0].value=g):(c[0].checked=!1,c[0].defaultChecked=!1)):c.val(g)):"checkbox"===c[0].type?(c[0].checked=!1,c[0].defaultChecked=!1,g=a(c).data("offval")):c[0].type&&"select"===c[0].type.substr(0,6)?c[0].selectedIndex=0:c.val(g),!0===b.checkOnSubmit||b.checkOnUpdate)&&(b._savedData[e]=g)}),a("#id_g",
f).val(d);else{var w=x.getInd.call(r,d,!0);w&&(a(w.cells).filter("td[role=gridcell]").each(function(c){var h;e=l[c].name;if("cb"!==e&&"subgrid"!==e&&"rn"!==e&&!0===l[c].editable){try{h=a.unformat.call(n,a(this),{rowId:d,colModel:l[c]},c)}catch(g){h="textarea"===l[c].edittype?a(this).text():a(this).html()}t.autoEncodeOnEdit&&(h=m.oldDecodePostedData(h));if(!0===b.checkOnSubmit||b.checkOnUpdate)b._savedData[e]=h;e="#"+u(e);switch(l[c].edittype){case "password":case "text":case "button":case "image":case "textarea":da(h)&&
(h="");a(e,f).val(h);break;case "select":var k=h.split(","),k=a.map(k,function(b){return a.trim(b)});a(e+" option",f).each(function(){var b=a(this),d=a.trim(b.val()),b=a.trim(b.text());l[c].editoptions.multiple||a.trim(h)!==b&&k[0]!==b&&k[0]!==d?l[c].editoptions.multiple?-1<a.inArray(b,k)||-1<a.inArray(d,k)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});break;case "checkbox":h=String(h);l[c].editoptions&&l[c].editoptions.value?h=l[c].editoptions.value.split(":")[0]===h:(h=h.toLowerCase(),
h=0>h.search(/(false|f|0|no|n|off|undefined)/i)&&""!==h);a(e,f).prop({checked:h,defaultChecked:h});break;case "custom":try{if(l[c].editoptions&&a.isFunction(l[c].editoptions.custom_value))l[c].editoptions.custom_value.call(n,a(e,f),"set",h);else throw"e1";}catch(g){"e1"===g?m.info_dialog.call(n,fa,"function 'custom_value' "+b.msg.nodefined,b.bClose):m.info_dialog.call(n,fa,g.message,b.bClose)}}E++}}),0<E&&a("#id_g",D).val(d))}}function d(){var d=b.url||t.editurl;a.each(P,function(b,f){var c=f.name,
e=h[c];"date"!==f.formatter||null!=f.formatoptions&&!0===f.formatoptions.sendFormatted||(h[c]=a.unformat.date.call(n,e,f));"clientArray"!==d&&f.editoptions&&!0===f.editoptions.NullIfEmpty&&h.hasOwnProperty(c)&&""===e&&(h[c]="null")})}function e(){var f=[!0,"",""],c=f,e={},g=t.prmNames,k,p,G,u,v,J,y=x.getInd.call(r,q),z=!1===y?null:n.rows[y];(J=r.triggerHandler("jqGridAddEditBeforeCheckValues",[a(A),E]))&&"object"===typeof J&&(h=J);y=!1===y?-1:y;a.isFunction(b.beforeCheckValues)&&(J=b.beforeCheckValues.call(n,
h,a(A),E))&&"object"===typeof J&&(h=J);for(G in h)if(h.hasOwnProperty(G)){J=t.iColByName[G];c=m.checkValues.call(n,h[G],G,void 0,void 0,{oldValue:"_empty"===q?null:x.getCell.call(r,q,J),newValue:h[G],cmName:G,rowid:q,cm:P[J],iCol:J,iRow:y,tr:z,td:null==z?null:z.cells[J],mode:"_empty"===q?"addForm":"editForm"});if(null==c||!0===c)c=f;if(!1===c[0])break}d();if(c[0]){e=r.triggerHandler("jqGridAddEditClickSubmit",[b,h,E]);void 0===e&&a.isFunction(b.onclickSubmit)&&(e=b.onclickSubmit.call(n,b,h,E)||{});
c=r.triggerHandler("jqGridAddEditBeforeSubmit",[h,a(A),E]);if(null==c||!0===c)c=f;c[0]&&a.isFunction(b.beforeSubmit)&&(c=b.beforeSubmit.call(n,h,a(A),E),null==c||!0===c)&&(c=f)}if(c[0]&&!b.processing){b.processing=!0;a("#sData",w).addClass(Z);G=b.url||t.editurl;p=g.oper;k="clientArray"===G&&!1!==t.keyName?t.keyName:g.id;h[p]="_empty"===a.trim(h[C+"_id"])?g.addoper:g.editoper;h[p]!==g.addoper?h[k]=h[C+"_id"]:void 0===h[k]&&(h[k]=h[C+"_id"]);delete h[C+"_id"];h=a.extend(h,b.editData,e);if(!0===t.treeGrid)for(v in h[p]===
g.addoper&&(u=t.selrow,h["adjacency"===t.treeGridModel?t.treeReader.parent_id_field:"parent_id"]=u),t.treeReader)t.treeReader.hasOwnProperty(v)&&(e=t.treeReader[v],!h.hasOwnProperty(e)||h[p]===g.addoper&&"parent_id_field"===v||delete h[e]);h[k]=m.stripPref(t.idPrefix,h[k]);t.autoEncodeOnEdit&&a.each(h,function(b,c){a.isFunction(c)||(h[b]=m.oldEncodePostedData(c))});v=a.extend({url:a.isFunction(G)?G.call(n,h[k],E,h,b):G,type:a.isFunction(b.mtype)?b.mtype.call(n,E,b,h[k],h):b.mtype,data:m.serializeFeedback.call(n,
a.isFunction(b.serializeEditData)?b.serializeEditData:t.serializeEditData,"jqGridAddEditSerializeEditData",h),complete:function(d,e){r.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});a("#sData",w).removeClass(Z);h[k]=a("#id_g",D).val();if(300<=d.status&&304!==d.status||0===d.status&&4===d.readyState)c[0]=!1,c[1]=r.triggerHandler("jqGridAddEditErrorTextFormat",[d,E]),a.isFunction(b.errorTextFormat)?c[1]=b.errorTextFormat.call(n,d,E):c[1]=e+" Status: '"+d.statusText+"'. Error code: "+d.status;
else{c=r.triggerHandler("jqGridAddEditAfterSubmit",[d,h,E]);if(null==c||!0===c)c=f;c[0]&&a.isFunction(b.afterSubmit)&&(c=b.afterSubmit.call(n,d,h,E),null==c||!0===c)&&(c=f)}if(!1===c[0])a("#FormError>td",D).html(c[1]),a("#FormError",D).show();else{t.autoEncodeOnEdit&&a.each(h,function(a,b){h[a]=m.oldDecodePostedData(b)});var q=[a.extend({},b.reloadGridOptions||{})];h[p]===g.addoper?(c[2]||(c[2]=m.randId()),null==h[k]||"_empty"===h[k]||h[p]===g.addoper?h[k]=c[2]:c[2]=h[k],b.reloadAfterSubmit?r.trigger("reloadGrid",
q):!0===t.treeGrid?x.addChildNode.call(r,c[2],u,h):x.addRowData.call(r,c[2],h,b.addedrow),b.closeAfterAdd?(!0!==t.treeGrid&&I.call(r,c[2]),X()):b.clearAfterAdd&&l("_empty",A)):(b.reloadAfterSubmit?(r.trigger("reloadGrid",q),b.closeAfterEdit||setTimeout(function(){I.call(r,h[k])},1E3)):!0===t.treeGrid?x.setTreeRow.call(r,h[k],h):x.setRowData.call(r,h[k],h),b.closeAfterEdit&&X());if(a.isFunction(b.afterComplete)){var G=d;setTimeout(function(){r.triggerHandler("jqGridAddEditAfterComplete",[G,h,a(A),
E]);b.afterComplete.call(n,G,h,a(A),E);G=null},50)}if(b.checkOnSubmit||b.checkOnUpdate)if(a(A).data("disabled",!1),"_empty"!==b._savedData[C+"_id"])for(var v in b._savedData)b._savedData.hasOwnProperty(v)&&h[v]&&(b._savedData[v]=h[v])}b.processing=!1;try{a(":input:visible",A)[0].focus()}catch(J){}}},m.ajaxOptions,b.ajaxEditOptions);v.url||b.useDataProxy||(a.isFunction(t.dataProxy)?b.useDataProxy=!0:(c[0]=!1,c[1]+=" "+m.errors.nourl));c[0]&&(r.jqGrid("progressBar",{method:"show",loadtype:b.saveui,
htmlcontent:b.savetext}),b.useDataProxy?(e=t.dataProxy.call(n,v,"set_"+C),void 0===e&&(e=[!0,""]),!1===e[0]?(c[0]=!1,c[1]=e[1]||"Error deleting the selected row!"):(v.data.oper===g.addoper&&b.closeAfterAdd&&X(),v.data.oper===g.editoper&&b.closeAfterEdit&&X())):"clientArray"===v.url?(b.reloadAfterSubmit=!1,h=v.data,v.complete({status:200,statusText:""},"")):a.ajax(v))}!1===c[0]&&(a("#FormError>td",D).html(c[1]),a("#FormError",D).show())}function g(a,b){var c=!1,d;for(d in a)if(a.hasOwnProperty(d)&&
String(a[d])!==String(b[d])){c=!0;break}return c}function k(){var d=!0;a("#FormError",D).hide();b.checkOnUpdate&&(h={},c(),aa=g(h,b._savedData))&&(a(A).data("disabled",!0),a(".confirm",B).show(),d=!1);return d}function v(){var b=m.detectRowEditing.call(n,q);if(null!=b)if("inlineEditing"===b.mode)x.restoreRow.call(r,q);else{var b=b.savedRow,c=n.rows[b.id];x.restoreCell.call(r,b.id,b.ic);a(c.cells[b.ic]).removeClass("edit-cell "+oa);a(c).addClass(oa).attr({"aria-selected":"true",tabindex:"0"})}}function y(b,
c){var d=c[1].length-1;0===b?a("#pData",w).addClass(V):void 0!==c[1][b-1]&&U(a("#"+u(c[1][b-1])),V)?a("#pData",w).addClass(V):a("#pData",w).removeClass(V);b===d?a("#nData",w).addClass(V):void 0!==c[1][b+1]&&U(a("#"+u(c[1][b+1])),V)?a("#nData",w).addClass(V):a("#nData",w).removeClass(V)}function f(){var b=x.getDataIDs.call(r),c=a("#id_g",D).val();return[a.inArray(c,b),b]}var n=this,r=a(n),t=n.p;if(n.grid&&null!=t&&q){var C=t.id,H=x.getGridRes,I=x.setSelection,b=a.extend(!0,{top:0,left:0,width:300,
datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,
onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:F.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:H.call(r,"defaults.savetext")||"Saving..."},H.call(r,"edit"),m.edit,t.formEditing||{},T||{}),A="FrmGrid_"+C,K=A,z="TblGrid_"+C,D="#"+u(z),w=D+"_2",L={themodal:"editmod"+C,modalhead:"edithd"+C,modalcontent:"editcnt"+C,resizeAlso:A},B="#"+u(L.themodal),N=t.gBox,P=t.colModel,ea=t.iColByName,R=1,W=0,h,aa,E,G=b.commonIconClass,
X=function(){m.hideModal(B,{gb:N,jqm:b.jqModal,onClose:b.onClose,removemodal:b.removemodal})},fa=H.call(r,"errors.errcap"),Y=function(){var c=a.makeArray(arguments);c.unshift("");c.unshift("AddEdit");c.unshift(b);return ja.apply(n,c)},pa=Q.call(n,"hover"),V=Q.call(n,"disabled"),oa=Q.call(n,"select"),Z=Q.call(n,"active"),J=Q.call(n,"error");a(B).remove();A="#"+u(A);"new"===q?(q="_empty",E="add",b.caption=b.addCaption):(b.caption=b.editCaption,E="edit");var ia=!0;!b.checkOnUpdate||!0!==b.jqModal&&void 0!==
b.jqModal||b.modal||(ia=!1);var ga=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",ba=isNaN(b.datawidth)?b.datawidth:b.datawidth+"px",K=a("<form name='FormPost' id='"+K+"' class='FormGrid' onSubmit='return false;' style='width:"+ba+";overflow:auto;position:relative;height:"+ga+";'></form>").data("disabled",!1),ha=a("<table id='"+z+"' class='EditTable'><tbody></tbody></table>");a(P).each(function(){var a=this.formoptions;R=Math.max(R,a?a.colpos||0:0);W=Math.max(W,a?a.rowpos||0:0)});a(K).append(ha);
J=a("<tr id='FormError' style='display:none'><td class='"+J+"' colspan='"+2*R+"'>&#160;</td></tr>");J[0].rp=0;a(ha).append(J);J=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*R+"'>"+(b.topinfo||"&#160;")+"</td></tr>");J[0].rp=0;a(ha).append(J);if(Y("beforeInitData",K,E)){v();ga=(J="rtl"===t.direction?!0:!1)?"nData":"pData";ba=J?"pData":"nData";p(q,ha,R);var ga=O.call(n,ga,"",S(G,b.prevIcon),"","left"),ba=O.call(n,ba,"",S(G,b.nextIcon),"","right"),la=O.call(n,"sData",b.bSubmit),
ma=O.call(n,"cData",b.bCancel),z="<div class='"+F.call(n,"dialog.footer")+"'><table class='EditTable' id='"+z+"_2'><tbody><tr><td colspan='2'><hr class='"+F.call(n,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+t.direction+"'>"+(J?ba+ga:ga+ba)+"</td><td class='EditButton EditButton-"+t.direction+"'>"+la+"&#160;"+ma+"</td></tr>",z=z+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(b.bottominfo||"&#160;")+"</td></tr>"),
z=z+"</tbody></table></div>";if(0<W){var na=[];a.each(a(ha)[0].rows,function(a,b){na[a]=b});na.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(na,function(b,c){a("tbody",ha).append(c)})}b.gbox=N;var qa=!1;!0===b.closeOnEscape&&(b.closeOnEscape=!1,qa=!0);z=a("<div></div>").append(a("<div class='"+F.call(n,"dialog.body")+"'></div>").append(K)).append(z);m.createModal.call(n,L,z,b,t.gView,a(N)[0]);b.topinfo&&a(".tinfo",D).show();b.bottominfo&&a(".binfo",w).show();z=z=null;a(B).keydown(function(c){var d=
(c.target.tagName||"").toUpperCase(),e,f;if(!0===a(A).data("disabled"))return!1;if(13===c.which&&"TEXTAREA"!==d){e=a(w).find(":focus");f=e.attr("id");if(0<e.length&&0<=a.inArray(f,["pData","nData","cData"]))return e.trigger("click"),!1;if(!0===b.savekey[0]&&13===b.savekey[1])return a("#sData",w).trigger("click"),!1}if(!0===b.savekey[0]&&c.which===b.savekey[1]&&"TEXTAREA"!==d)return a("#sData",w).trigger("click"),!1;if(27===c.which){if(!k())return!1;qa&&X();return!1}if(!0===b.navkeys[0]){if("_empty"===
a("#id_g",D).val())return!0;if(c.which===b.navkeys[1])return a("#pData",w).trigger("click"),!1;if(c.which===b.navkeys[2])return a("#nData",w).trigger("click"),!1}});b.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span",B).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close",B).unbind("click").click(function(){if(!k())return!1;X();return!1}));ca(a("#sData",w),b.saveicon,G);ca(a("#cData",w),b.closeicon,G);if(b.checkOnSubmit||b.checkOnUpdate)la=O.call(n,"sNew",b.bYes),ba=O.call(n,"nNew",b.bNo),
ma=O.call(n,"cNew",b.bExit),L=b.zIndex||999,L++,a("<div class='"+b.overlayClass+" jqgrid-overlay confirm' style='z-index:"+L+";display:none;'>&#160;</div><div class='"+F.call(n,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(L+1)+"'>"+b.saveData+"<br/><br/>"+la+ba+ma+"</div>").insertAfter(A),a("#sNew",B).click(function(){e();a(A).data("disabled",!1);a(".confirm",B).hide();return!1}),a("#nNew",B).click(function(){a(".confirm",B).hide();a(A).data("disabled",!1);setTimeout(function(){a(":input:visible",
A)[0].focus()},0);return!1}),a("#cNew",B).click(function(){a(".confirm",B).hide();a(A).data("disabled",!1);X();return!1});Y("onInitializeForm",a(A),E);"_empty"!==q&&b.viewPagerButtons?a("#pData,#nData",w).show():a("#pData,#nData",w).hide();Y("beforeShowForm",a(A),E);a(B).data("onClose",b.onClose);m.viewModal.call(n,B,{gbox:N,jqm:b.jqModal,overlay:b.overlay,modal:b.modal,overlayClass:b.overlayClass,toTop:b.toTop,onHide:function(a){a.w.remove();a.o&&a.o.remove()}});ia||a("."+u(b.overlayClass)).click(function(){if(!k())return!1;
X();return!1});a(".fm-button",B).hover(function(){a(this).addClass(pa)},function(){a(this).removeClass(pa)});a("#sData",w).click(function(){h={};a("#FormError",D).hide();c();"_empty"===h[C+"_id"]?e():!0===b.checkOnSubmit?(aa=g(h,b._savedData))?(a(A).data("disabled",!0),a(".confirm",B).show()):e():e();return!1});a("#cData",w).click(function(){if(!k())return!1;X();return!1});a("#nData",w).click(function(){if(!k())return!1;a("#FormError",D).hide();var b=f();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+
1]){if(!Y("onclickPgButtons","next",a(A),b[1][b[0]]))return!1;l(b[1][b[0]+1],A);I.call(r,b[1][b[0]+1]);Y("afterclickPgButtons","next",a(A),b[1][b[0]+1]);y(b[0]+1,b)}return!1});a("#pData",w).click(function(){if(!k())return!1;a("#FormError",D).hide();var b=f();if(-1!==b[0]&&b[1][b[0]-1]){if(!Y("onclickPgButtons","prev",a(A),b[1][b[0]])||U(a("#"+u(b[1][b[0]-1])),V))return!1;l(b[1][b[0]-1],A);I.call(r,b[1][b[0]-1]);Y("afterclickPgButtons","prev",a(A),b[1][b[0]-1]);y(b[0]-1,b)}return!1});Y("afterShowForm",
a(A),E);ia=f();y(ia[0],ia)}}})},viewGridRow:function(q,T){return this.each(function(){function c(){!0!==f.closeOnEscape&&!0!==f.navkeys[0]||setTimeout(function(){a("#cData").focus()},0)}function p(b,c,d){var e,h,l,n=0,p,w,q=[],t=x.getInd.call(k,b),r;r=F.call(g,"dialog.viewData","DataTD form-view-data");var u=F.call(g,"dialog.viewLabel","CaptionTD form-view-label"),y="<td class='"+u+"' width='"+f.labelswidth+"'>&#160;</td><td class='"+r+" ui-helper-reset'>&#160;</td>",z="",u="<td class='"+u+"'></td><td class='"+
r+"'></td>",A=["integer","number","currency"],B=0,L=0,C,D,N;for(r=1;r<=d;r++)z+=1===r?y:u;a(K).each(function(){(h=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,A)?B=Math.max(B,parseInt(this.width,10)):L=Math.max(L,parseInt(this.width,10)))});C=0!==B?B:0!==L?L:0;a(K).each(function(b){e=this.name;D=!1;w=(h=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":
"";N="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==e&&"subgrid"!==e&&"rn"!==e&&N){p=!1===t?"":m.getDataFieldOfCell.call(g,g.rows[t],b).html();D="right"===this.align&&0!==C?!0:!1;var f=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),k=parseInt(f.rowpos,10)||n+1,E=parseInt(2*(parseInt(f.colpos,10)||1),10);if(f.rowabove){var r=a("<tr><td class='contentinfo' colspan='"+2*d+"'>"+f.rowcontent+"</td></tr>");a(c).append(r);r[0].rp=k}l=a(c).find("tr[data-rowpos="+k+"]");0===l.length&&
(l=a("<tr "+w+" data-rowpos='"+k+"'></tr>").addClass("FormData").attr("id","trv_"+e),a(l).append(z),a(c).append(l),l[0].rp=k);f=void 0===f.label?v.colNames[b]:f.label;k=a("td:eq("+(E-1)+")",l[0]);a("td:eq("+(E-2)+")",l[0]).html("<b>"+(f||"&nbsp;")+"</b>");k[da(k.html())?"html":"append"]("<span>"+(p||"&nbsp;")+"</span>").attr("id","v_"+e);D&&a("td:eq("+(E-1)+") span",l[0]).css({"text-align":"right",width:C+"px"});q[n]=b;n++}});0<n&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+
(2*d-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>"),b[0].rp=n+99,a(c).append(b));return q}function l(b){var c,d,e=0,f=x.getInd.call(k,b,!0),h;f&&(a("td",f).each(function(b){h=K[b];c=h.name;d=h.editrules&&!0===h.editrules.edithidden?!1:!0===h.hidden?!0:!1;"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(c=u("v_"+c),a("#"+c+" span",r).html(m.getDataFieldOfCell.call(g,f,b).html()),d&&a("#"+c,r).parents("tr:first").hide(),e++)}),0<e&&a("#id_g",r).val(b))}
function d(b,c){var d=c[1].length-1;0===b?a("#pData",t).addClass(N):void 0!==c[1][b-1]&&U(a("#"+u(c[1][b-1])),N)?a("#pData",t).addClass(N):a("#pData",t).removeClass(N);b===d?a("#nData",t).addClass(N):void 0!==c[1][b+1]&&U(a("#"+u(c[1][b+1])),N)?a("#nData",t).addClass(N):a("#nData",t).removeClass(N)}function e(){var b=x.getDataIDs.call(k),c=a("#id_g",r).val();return[a.inArray(c,b),b]}var g=this,k=a(g),v=g.p;if(g.grid&&null!=v&&q){var y=v.id,f=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",
dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"30%",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},x.getGridRes.call(k,"view"),m.view||{},v.formViewing||{},T||{}),n="#ViewGrid_"+u(y),r="#ViewTbl_"+u(y),t=r+"_2",C="ViewGrid_"+y,H="ViewTbl_"+y,I=f.commonIconClass,y={themodal:"viewmod"+y,modalhead:"viewhd"+y,modalcontent:"viewcnt"+y,resizeAlso:C},b="#"+u(y.themodal),A=v.gBox,K=v.colModel,z=1,D=0,w=function(){var b=a.makeArray(arguments);
b.unshift("");b.unshift("View");b.unshift(f);return ja.apply(g,b)},L=function(){m.hideModal(b,{gb:A,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})},B=Q.call(g,"hover"),N=Q.call(g,"disabled"),P=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",ea=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",C=a("<div class='"+F.call(g,"dialog.body")+"'><form name='FormPost' id='"+C+"' class='FormGrid' style='width:"+ea+";overflow:auto;position:relative;height:"+P+";'></form></div>"),P=C.children("form.FormGrid"),
R=a("<table id='"+H+"' class='EditTable'><tbody></tbody></table>");a(b).remove();a(K).each(function(){var a=this.formoptions;z=Math.max(z,a?a.colpos||0:0);D=Math.max(D,a?a.rowpos||0:0)});P.append(R);if(w("beforeInitData",P)){p(q,R,z);var W=(P="rtl"===v.direction?!0:!1)?"pData":"nData",ea=O.call(g,P?"nData":"pData","",S(I,f.prevIcon),"","left"),W=O.call(g,W,"",S(I,f.nextIcon),"","right"),h=O.call(g,"cData",f.bClose);if(0<D){var aa=[];a.each(a(R)[0].rows,function(a,b){aa[a]=b});aa.sort(function(a,b){return a.rp>
b.rp?1:a.rp<b.rp?-1:0});a.each(aa,function(b,c){a("tbody",R).append(c)})}f.gbox=A;H=a("<div></div>").append(C).append("<div class='"+F.call(g,"dialog.footer")+"'><table border='0' class='EditTable' id='"+H+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+v.direction+"' width='"+(f.labelswidth||"auto")+"'>"+(P?W+ea:ea+W)+"</td><td class='EditButton EditButton-"+v.direction+"'>"+h+"</td></tr></tbody></table></div>");m.createModal.call(g,y,H,f,v.gView,a(v.gView)[0]);f.viewPagerButtons||
a("#pData, #nData",t).hide();H=null;a(b).keydown(function(b){var c,d;if(!0===a(n).data("disabled"))return!1;if(13===b.which&&(c=a(t).find(":focus"),d=c.attr("id"),0<c.length&&0<=a.inArray(d,["pData","nData","cData"])))return c.trigger("click"),!1;if(27===b.which)return f.closeOnEscape&&L(),!1;if(!0===f.navkeys[0]){if(b.which===f.navkeys[1])return a("#pData",t).trigger("click"),!1;if(b.which===f.navkeys[2])return a("#nData",t).trigger("click"),!1}});ca(a("#cData",t),f.closeicon,I);w("beforeShowForm",
a(n));m.viewModal.call(g,b,{gbox:A,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal,onHide:function(a){a.w.remove();a.o&&a.o.remove()}});a(".fm-button:not(."+N.split(" ").join(".")+")",t).hover(function(){a(this).addClass(B)},function(){a(this).removeClass(B)});c();a("#cData",t).click(function(){L();return!1});a("#nData",t).click(function(){a("#FormError",r).hide();var b=e();b[0]=parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){if(!w("onclickPgButtons","next",a(n),b[1][b[0]]))return!1;l(b[1][b[0]+
1]);x.setSelection.call(k,b[1][b[0]+1]);w("afterclickPgButtons","next",a(n),b[1][b[0]+1]);d(b[0]+1,b)}c();return!1});a("#pData",t).click(function(){a("#FormError",r).hide();var b=e();if(-1!==b[0]&&b[1][b[0]-1]){if(!w("onclickPgButtons","prev",a(n),b[1][b[0]]))return!1;l(b[1][b[0]-1]);x.setSelection.call(k,b[1][b[0]-1]);w("afterclickPgButtons","prev",a(n),b[1][b[0]-1]);d(b[0]-1,b)}c();return!1});I=e();d(I[0],I)}}})},delGridRow:function(q,T){return this.each(function(){var c=this,p=c.p,l=a(c);if(c.grid&&
null!=p&&q){var d=p.id,e=a.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},x.getGridRes.call(l,"del"),m.del||{},p.formDeleting||{},T||{}),g="DelTbl_"+d,k="#DelTbl_"+u(d),
v,y,f,n,r={themodal:"delmod"+d,modalhead:"delhd"+d,modalcontent:"delcnt"+d,resizeAlso:g},t="#"+u(r.themodal),C=p.gBox,H=e.commonIconClass,I=function(){var b=a.makeArray(arguments);b.unshift("");b.unshift("Delete");b.unshift(e);return ja.apply(c,b)},b=Q.call(c,"hover"),A=Q.call(c,"active"),K=Q.call(c,"error");a.isArray(q)||(q=[String(q)]);if(void 0!==a(t)[0]){if(!I("beforeInitData",a(k)))return;a("#DelData>td",k).text(q.join()).data("rowids",q);a("#DelError",k).hide();!0===e.processing&&(e.processing=
!1,a("#dData",k).removeClass(A));I("beforeShowForm",a(k));m.viewModal.call(c,t,{gbox:C,jqm:e.jqModal,jqM:!1,overlay:e.overlay,toTop:e.toTop,modal:e.modal})}else{var z=isNaN(e.dataheight)?e.dataheight:e.dataheight+"px",D=isNaN(e.datawidth)?e.datawidth:e.datawidth+"px",z="<div class='"+F.call(c,"dialog.body")+"'><div id='"+g+"' class='formdata' style='width:"+D+";overflow:auto;position:relative;height:"+z+";'>",z=z+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+
K+"'></td></tr>")+("<tr id='DelData' style='display:none'><td >"+q.join()+"</td></tr>"),z=z+("<tr><td class='delmsg' style='white-space:pre;'>"+e.msg+"</td></tr>"),z=z+"</tbody></table></div></div>",K=O.call(c,"dData",e.bSubmit),D=O.call(c,"eData",e.bCancel),z=z+("<div class='"+F.call(c,"dialog.footer")+"'><table class='EditTable' id='"+g+"_2'><tbody><tr><td><hr class='"+F.call(c,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+p.direction+"'>"+K+"&#160;"+
D+"</td></tr></tbody></table></div>");e.gbox=C;m.createModal.call(c,r,z,e,p.gView,a(p.gView)[0]);a("#DelData>td",k).data("rowids",q);if(!I("beforeInitData",a(z)))return;a(".fm-button",k+"_2").hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)});ca(a("#dData",k+"_2"),e.delicon,H);ca(a("#eData",k+"_2"),e.cancelicon,H);a("#dData",k+"_2").click(function(){var b=[!0,""],g,q=a("#DelData>td",k),r=q.text(),u=q.data("rowids"),q={};a.isFunction(e.onclickSubmit)&&(q=e.onclickSubmit.call(c,
e,r)||{});a.isFunction(e.beforeSubmit)&&(b=e.beforeSubmit.call(c,r)||b);if(b[0]&&!e.processing){e.processing=!0;f=p.prmNames;v=a.extend({},e.delData,q);n=f.oper;v[n]=f.deloper;y=f.id;r=u.slice();if(!r.length)return!1;for(g in r)r.hasOwnProperty(g)&&(r[g]=m.stripPref(p.idPrefix,r[g]));v[y]=r.join();a(this).addClass(A);g=e.url||p.editurl;g=a.extend({url:a.isFunction(g)?g.call(c,v[y],v,e):g,type:e.mtype,data:a.isFunction(e.serializeDelData)?e.serializeDelData.call(c,v):v,complete:function(d,f){var g;
a("#dData",k+"_2").removeClass(A);300<=d.status&&304!==d.status||0===d.status&&4===d.readyState?(b[0]=!1,a.isFunction(e.errorTextFormat)?b[1]=e.errorTextFormat.call(c,d):b[1]=f+" Status: '"+d.statusText+"'. Error code: "+d.status):a.isFunction(e.afterSubmit)&&(b=e.afterSubmit.call(c,d,v)||[!0]);if(!1===b[0])a("#DelError>td",k).html(b[1]),a("#DelError",k).show();else{if(e.reloadAfterSubmit&&"local"!==p.datatype)l.trigger("reloadGrid",[a.extend({},e.reloadGridOptions||{})]);else if(!0===p.treeGrid)try{x.delTreeNode.call(l,
u[0])}catch(h){}else for(u=u.slice(),g=0;g<u.length;g++)x.delRowData.call(l,u[g]);setTimeout(function(){I("afterComplete",d,r,a(k))},50)}e.processing=!1;b[0]&&m.hideModal(t,{gb:C,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal})}},m.ajaxOptions,e.ajaxDelOptions);g.url||e.useDataProxy||(a.isFunction(p.dataProxy)?e.useDataProxy=!0:(b[0]=!1,b[1]+=" "+m.errors.nourl));b[0]&&(e.useDataProxy?(g=p.dataProxy.call(c,g,"del_"+d),void 0===g&&(g=[!0,""]),!1===g[0]?(b[0]=!1,b[1]=g[1]||"Error deleting the selected row!"):
m.hideModal(t,{gb:C,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal})):"clientArray"===g.url?(v=g.data,g.complete({status:200,statusText:""},"")):a.ajax(g))}!1===b[0]&&(a("#DelError>td",k).html(b[1]),a("#DelError",k).show());return!1});a("#eData",k+"_2").click(function(){m.hideModal(t,{gb:C,jqm:e.jqModal,onClose:e.onClose,removemodal:e.removemodal});return!1});I("beforeShowForm",a(k));m.viewModal.call(c,t,{gbox:C,jqm:e.jqModal,overlay:e.overlay,toTop:e.toTop,modal:e.modal})}I("afterShowForm",
a(k));!0===e.closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+u(r.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(q,T,c,p,l,d,e){"object"===typeof q&&(e=d,d=l,l=p,p=c,c=T,T=q,q=void 0);p=p||{};c=c||{};e=e||{};l=l||{};d=d||{};return this.each(function(){var g=this,k=g.p,v=a(g);if(g.grid&&null!=k&&!(g.nav&&0<a(q).find(".navtable").length)){var y=k.id,f=a.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,
afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},x.getGridRes.call(v,"nav"),m.nav||{},k.navOptions||{},T||{});f.position=f.position||("rtl"===k.direction?"right":"left");var n,r=k.idSel,t=k.gBox,C=f.commonIconClass,H={themodal:"alertmod_"+y,modalhead:"alerthd_"+y,modalcontent:"alertcnt_"+y},I=function(){return function(){var b=document.documentElement,c=window,d=1024,e=768,h=v.closest(".ui-jqgrid").offset();
void 0===a("#"+u(H.themodal))[0]&&(f.alerttop||f.alertleft||(void 0!==c.innerWidth?(d=c.innerWidth,e=c.innerHeight):null!=b&&void 0!==b.clientWidth&&0!==b.clientWidth&&(d=b.clientWidth,e=b.clientHeight),d=d/2-parseInt(f.alertwidth,10)/2-h.left,e=e/2-25-h.top),m.createModal.call(g,H,"<div class='"+F.call(g,"dialog.body")+"'><div>"+f.alerttext+"</div></div>",{gbox:t,jqModal:f.jqModal,drag:!0,resize:!0,caption:f.alertcap,top:null!=f.alerttop?f.alerttop:e,left:null!=f.alertleft?f.alertleft:d,width:f.alertwidth,
height:f.alertheight,closeOnEscape:f.closeOnEscape,zIndex:f.alertzIndex,removemodal:f.removemodal},k.gView,a(t)[0],!1));m.viewModal.call(g,"#"+u(H.themodal),{gbox:t,toTop:f.alertToTop,jqm:f.jqModal});var l=a("#"+u(H.modalhead)).find(".ui-jqdialog-titlebar-close");l.attr({tabindex:"0",href:"#",role:"button"});setTimeout(function(){l.focus()},50)}}(),b,A=function(b){if(13===b.which&&(b=a(this).find(".ui-pg-button").filter(":focus"),0<b.length)){var c=b[0].id,c=c.substr(0,0<a(this).closest(".ui-jqgrid-toppager").length?
c.length-y.length-5:c.length-y.length-1)+"mod"+k.id,d=a(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(0>a.inArray(c,d))return b.trigger("click"),!1}},K=Q.call(g,"hover"),z=Q.call(g,"disabled"),D=F.call(g,"navButton","ui-pg-button");if(g.grid){g.modalAlert=I;void 0===q&&(k.pager?(q=k.pager,k.toppager&&(f.cloneToTop=!0)):k.toppager&&(q=k.toppager));var w=1,L,B,N,P,O,R,W=["left","center","right"],h="<div class='"+F.call(g,"navButton","ui-pg-button "+Q.call(g,"disabled"))+"'><span class='ui-separator'></span></div>",
aa=function(){U(this,z)||a(this).addClass(K)},E=function(){a(this).removeClass(K)},G=function(){U(this,z)||(a.isFunction(f.addfunc)?f.addfunc.call(g):x.editGridRow.call(v,"new",p));return!1},X=function(b,c,d){if(!U(this,z)){var e=k.selrow;e?a.isFunction(b)?b.call(g,e):x[c].call(v,e,d):I()}return!1},fa=function(){return X.call(this,f.editfunc,"editGridRow",c)},Y=function(){return X.call(this,f.viewfunc,"viewGridRow",e)},ca=function(){var b;U(this,z)||(k.multiselect?(b=k.selarrrow,0===b.length&&(b=
null)):b=k.selrow,b?a.isFunction(f.delfunc)?f.delfunc.call(g,b):x.delGridRow.call(v,b,l):I());return!1},V=function(){U(this,z)||(a.isFunction(f.searchfunc)?f.searchfunc.call(g,d):x.searchGrid.call(v,d));return!1},da=function(){if(!U(this,z)){a.isFunction(f.beforeRefresh)&&f.beforeRefresh.call(g);k.search=!1;k.resetsearch=!0;try{if("currentfilter"!==f.refreshstate){k.postData.filters="";try{a("#fbox_"+r).jqFilter("resetFilter")}catch(b){}a.isFunction(g.clearToolbar)&&g.clearToolbar(!1)}}catch(b){}switch(f.refreshstate){case "firstpage":v.trigger("reloadGrid",
[a.extend({},f.reloadGridOptions||{},{page:1})]);break;case "current":case "currentfilter":v.trigger("reloadGrid",[a.extend({},f.reloadGridOptions||{},{current:!0})])}a.isFunction(f.afterRefresh)&&f.afterRefresh.call(g)}return!1},Z=function(c,d,e){var g=a("<div class='"+D+"' tabindex='0' role='button'></div>"),h=f[c+"icon"],k=a.trim(f[c+"text"]);g.append("<div class='ui-pg-div'><span class='"+(f.iconsOverText?S("ui-pg-button-icon-over-text",C,h):S(C,h))+"'></span>"+(k?"<span class='ui-pg-button-text"+
(f.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+k+"</span>":"")+"</div>");a(b).append(g);g.attr({title:f[c+"title"]||"",id:d||c+"_"+N}).click(e).hover(aa,E);return g};f.cloneToTop&&k.toppager&&(w=2);for(L=0;L<w;L++){b=a("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===k.direction?"right":"left")+";table-layout:auto;'></div>");0===L?(B=q,N=y,B===k.toppager&&(N+="_top",w=1)):(B=k.toppager,N=y+"_top");f.add&&Z("add",p.id,G);f.edit&&Z("edit",c.id,fa);f.view&&Z("view",
e.id,Y);f.del&&Z("del",l.id,ca);(f.add||f.edit||f.del||f.view)&&a(b).append(h);f.search&&(n=Z("search",d.id,V),d.showOnLoad&&!0===d.showOnLoad&&a(n,b).click());f.refresh&&Z("refresh","",da);n=a(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px";a("body").append("<div id='testpg2' class='"+F.call(g,"gBox","ui-jqgrid")+"' style='font-size:"+n+";visibility:hidden;' ></div>");n=a(b).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(B+"_"+f.position,B).append(b);if(f.hideEmptyPagerParts)for(P=
0;P<W.length;P++)W[P]!==f.position&&(R=a(B+"_"+W[P],B),0===R.length||0===R[0].childNodes.length?R.hide():1===R[0].childNodes.length&&(O=R[0].firstChild,!a(O).is("table.ui-pg-table")||0!==O.rows&&0!==O.rows[0].cells.length||R.hide()));k._nvtd&&(n>k._nvtd[0]&&(a(B+"_"+f.position,B).width(n),k._nvtd[0]=n),k._nvtd[1]=n);g.nav=!0;b.bind("keydown.jqGrid",A)}v.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(q,T){"object"===typeof q&&(T=q,q=void 0);return this.each(function(){var c=
this,p=c.p;if(c.grid){var l=a.extend({caption:"newButton",title:"",onClickButton:null,position:"last",cursor:"pointer",iconsOverText:!1},x.getGridRes.call(a(c),"nav"),m.nav||{},p.navOptions||{},T||{}),d=l.id,e=Q.call(c,"hover"),g=Q.call(c,"disabled"),k=F.call(c,"navButton","ui-pg-button");if(void 0===q)if(p.pager)if(x.navButtonAdd.call(a(c),p.pager,l),p.toppager)q=p.toppager,d&&(d+="_top");else return;else p.toppager&&(q=p.toppager);"string"===typeof q&&0!==q.indexOf("#")&&(q="#"+u(q));var p=a(".navtable",
q),v=l.commonIconClass;if(0<p.length&&!(d&&0<p.find("#"+u(d)).length)){var y=a("<div tabindex='0' role='button'></div>");"NONE"===l.buttonicon.toString().toUpperCase()?a(y).addClass(k).append("<div class='ui-pg-div'>"+(l.caption?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l.caption+"</span>":"")+"</div>"):a(y).addClass(k).append("<div class='ui-pg-div'><span class='"+(l.iconsOverText?S("ui-pg-button-icon-over-text",v,l.buttonicon):S(v,l.buttonicon))+"'></span>"+
(l.caption?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l.caption+"</span>":"")+"</div>");d&&a(y).attr("id",d);"first"===l.position&&0<p.children("div.ui-pg-button").length?p.children("div.ui-pg-button").first().before(y):p.append(y);a(y,p).attr("title",l.title||"").click(function(d){U(this,g)||a.isFunction(l.onClickButton)&&l.onClickButton.call(c,l,d);return!1}).hover(function(){U(this,g)||a(this).addClass(e)},function(){a(this).removeClass(e)});a(c).triggerHandler("jqGridResetFrozenHeights")}}})},
navSeparatorAdd:function(q,m){m=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},m||{});return this.each(function(){if(this.grid){var c=this.p,p=F.call(this,"navButton","ui-pg-button "+Q.call(this,"disabled"));if(void 0===q)if(c.pager)if(x.navSeparatorAdd.call(a(this),c.pager,m),c.toppager)q=c.toppager;else return;else c.toppager&&(q=c.toppager);"string"===typeof q&&0!==q.indexOf("#")&&(q="#"+u(q));c=a(".navtable",q);0<c.length&&(p="<div class='"+p+"'><span class='"+m.sepclass+"'></span>"+
m.sepcontent+"</div>","first"===m.position?0===c.children("div.ui-pg-button").length?c.append(p):c.children("div.ui-pg-button").first().before(p):c.append(p))}})},GridToForm:function(q,m){return this.each(function(){var c,p,l,d;if(this.grid){var e=x.getRowData.call(a(this),q);if(e)for(c in e)if(e.hasOwnProperty(c))if(p=a("[name="+u(c)+"]",m),p.is("input:radio")||p.is("input:checkbox"))for(l=0;l<p.length;l++)d=a(p[l]),d.prop("checked",d.val()===String(e[c]));else p.val(da(e[c])?"":e[c])}})},FormToGrid:function(m,
u,c,p){return this.each(function(){if(this.grid){c||(c="set");p||(p="first");var l=a(u).serializeArray(),d={};a.each(l,function(a,c){d[c.name]=c.value});"add"===c?x.addRowData.call(a(this),m,d,p):"set"===c&&x.setRowData.call(a(this),m,d)}})}})});
//# sourceMappingURL=grid.formedit.map
